@tailwind base;
@tailwind components;
@tailwind utilities;

/* Kiosk Mode Specific Styles */
@layer base {
	html, body {
		@apply h-full;
	}
	
	/* Allow scrolling on main content */
	body {
		@apply overflow-y-auto;
	}
	
	/* Touch-friendly scrollbars */
	::-webkit-scrollbar {
		width: 12px;
		height: 12px;
	}
	
	::-webkit-scrollbar-track {
		background: #f1f1f1;
	}
	
	::-webkit-scrollbar-thumb {
		background: #888;
		border-radius: 6px;
	}
	
	::-webkit-scrollbar-thumb:hover {
		background: #555;
	}
}

@layer components {
	/* Kiosk Button Styles */
	.btn-kiosk {
		@apply min-h-touch min-w-touch text-kiosk-lg font-bold rounded-2xl 
		       shadow-lg active:scale-95 transition-transform duration-150
		       touch-manipulation select-none;
	}
	
	.btn-kiosk-primary {
		@apply btn-kiosk bg-primary text-white hover:bg-primary/90;
	}
	
	.btn-kiosk-secondary {
		@apply btn-kiosk bg-secondary text-white hover:bg-secondary/90;
	}
	
	/* Product Card */
	.product-card {
		@apply bg-white rounded-xl md:rounded-2xl shadow-md overflow-hidden
		       min-h-[180px] md:min-h-[200px] flex flex-col
		       active:scale-95 transition-transform duration-150
		       touch-manipulation cursor-pointer relative;
	}
	
	.product-card-image {
		@apply w-full h-24 md:h-32 object-cover bg-gray-200;
	}
	
	.product-card-body {
		@apply p-2 md:p-4 flex-1 flex flex-col justify-between;
	}
	
	/* Category Pills */
	.category-pill {
		@apply inline-block px-4 py-2 md:px-6 md:py-3 rounded-full 
		       text-xs md:text-kiosk-base
		       font-semibold whitespace-nowrap touch-manipulation
		       transition-all duration-200;
	}
	
	.category-pill-active {
		@apply bg-primary text-white;
	}
	
	.category-pill-inactive {
		@apply bg-gray-200 text-gray-700 hover:bg-gray-300;
	}
	
	/* Cart Item */
	.cart-item {
		@apply bg-white rounded-xl p-4 mb-3 shadow-sm
		       flex items-center justify-between;
	}
	
	/* Modifier Badge */
	.modifier-badge {
		@apply inline-block px-3 py-1 rounded-full text-sm
		       bg-blue-100 text-blue-800 mr-2 mb-2;
	}
	
	/* Payment Method Card */
	.payment-card {
		@apply bg-white rounded-2xl p-6 shadow-md
		       min-h-[120px] flex flex-col items-center justify-center
		       active:scale-95 transition-transform duration-150
		       touch-manipulation cursor-pointer border-4 border-transparent;
	}
	
	.payment-card-active {
		@apply border-primary bg-primary/5;
	}
	
	/* Offline Indicator */
	.offline-indicator {
		@apply fixed top-4 right-4 bg-warning text-warning-content
		       px-4 py-2 rounded-full shadow-lg z-50
		       flex items-center gap-2 animate-pulse;
	}
	
	/* Loading Spinner */
	.spinner {
		@apply animate-spin rounded-full border-4 border-gray-200
		       border-t-primary;
	}
}

@layer utilities {
	/* Disable text selection for kiosk mode */
	.no-select {
		-webkit-user-select: none;
		-moz-user-select: none;
		-ms-user-select: none;
		user-select: none;
	}
	
	/* Full viewport height considering mobile address bar */
	.h-screen-safe {
		height: 100vh;
		height: 100dvh;
	}
	
	/* Touch-friendly tap highlights */
	.tap-highlight-none {
		-webkit-tap-highlight-color: transparent;
	}
	
	/* Smooth kinetic scrolling */
	.scroll-smooth-touch {
		-webkit-overflow-scrolling: touch;
		scroll-behavior: smooth;
	}
}

/* Fullscreen API Support */
.fullscreen-enabled {
	width: 100vw !important;
	height: 100vh !important;
}

/* Animation for cart badge */
@keyframes bounce-in {
	0% { transform: scale(0); }
	50% { transform: scale(1.2); }
	100% { transform: scale(1); }
}

.animate-bounce-in {
	animation: bounce-in 0.3s ease-out;
}

/* Ripple Effect */
.ripple {
	position: relative;
	overflow: hidden;
}

.ripple::after {
	content: '';
	position: absolute;
	top: 50%;
	left: 50%;
	width: 0;
	height: 0;
	border-radius: 50%;
	background: rgba(255, 255, 255, 0.5);
	transform: translate(-50%, -50%);
	transition: width 0.6s, height 0.6s;
}

.ripple:active::after {
	width: 300px;
	height: 300px;
}
/* Accessibility Enhancements */
@layer utilities {
	/* Skip to main content link for screen readers */
	.skip-to-main {
		@apply sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 
		       focus:z-50 focus:px-4 focus:py-2 focus:bg-white focus:text-black 
		       focus:rounded focus:shadow-lg;
	}
	
	/* High contrast mode support */
	@media (prefers-contrast: high) {
		.btn-kiosk {
			border: 2px solid currentColor;
		}
		
		.product-card {
			border: 2px solid #000;
		}
	}
	
	/* Reduced motion support */
	@media (prefers-reduced-motion: reduce) {
		* {
			animation-duration: 0.01ms !important;
			animation-iteration-count: 1 !important;
			transition-duration: 0.01ms !important;
		}
	}
	
	/* Focus visible improvements */
	*:focus-visible {
		outline: 3px solid #667eea;
		outline-offset: 2px;
		border-radius: 4px;
	}
	
	/* Touch-friendly button minimum sizes */
	.btn-touch {
		min-width: 44px;
		min-height: 44px;
		padding: 0.75rem 1.5rem;
	}
	
	/* Kiosk mode: larger touch targets */
	.btn-kiosk-touch {
		min-width: 60px;
		min-height: 60px;
		padding: 1rem 2rem;
	}
	
	/* Screen reader only text */
	.sr-only-custom {
		position: absolute;
		width: 1px;
		height: 1px;
		padding: 0;
		margin: -1px;
		overflow: hidden;
		clip: rect(0, 0, 0, 0);
		white-space: nowrap;
		border-width: 0;
	}
	
	/* Show on focus for keyboard navigation */
	.sr-only-custom:focus {
		position: static;
		width: auto;
		height: auto;
		padding: inherit;
		margin: inherit;
		overflow: visible;
		clip: auto;
		white-space: normal;
	}
}

/* Font size controls (can be toggled via settings) */
html.font-size-small {
	font-size: 14px;
}

html.font-size-normal {
	font-size: 16px;
}

html.font-size-large {
	font-size: 18px;
}

html.font-size-xlarge {
	font-size: 20px;
}

/* High contrast theme */
html.high-contrast {
	--primary-color: #000;
	--secondary-color: #fff;
	--text-color: #000;
	--background-color: #fff;
	--border-color: #000;
}

html.high-contrast body {
	background: var(--background-color);
	color: var(--text-color);
}

html.high-contrast .btn-kiosk {
	border: 3px solid var(--border-color);
}

/* Dark mode support */
@media (prefers-color-scheme: dark) {
	html:not(.light-mode) {
		color-scheme: dark;
	}
	
	html:not(.light-mode) body {
		background: #1a1a1a;
		color: #f5f5f5;
	}
}